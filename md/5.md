# JENKINS

## Jenkins 란?
---

**Jenkins는 CI/CD를 위한 오픈소스로 도구**로, 다양한 플러그인을 지원하여 **코드 변경 사항이 발생할 때마다 자동으로 빌드, 테스트, 배포 과정을 수행**할 수 있는 도구이다. 이를 통해 개발팀은 소프트웨어 개발 및 배포 과정을 효율적으로 관리할 수 있으며, 반복 작업을 **자동화**하여 개발 생산성을 크게 향상시킬 수 있다. <br>

**CI/CD란 무엇인가?**
- **CI (지속적 통합, Continuous Integration)**: 개발자들이 각자 작업한 코드 변경 사항을 중앙 저장소에 정기적으로 통합하고, 이를 자동화된 빌드와 테스트를 통해 검증하는 프로세스이다. 이를 통해 코드 품질을 유지하고, 통합 시 발생할 수 있는 문제를 조기에 발견할 수 있다.
- **CD (지속적 배포, Continuous Deployment)**: CI 과정에서 통합된 코드가 자동으로 프로덕션 환경에 배포되기까지의 전 과정을 자동화하는 것을 의미한다. 이로 인해 새로운 기능과 수정 사항이 사용자에게 빠르고 안정적으로 전달될 수 있다.

Jenkins는 이러한 CI/CD 프로세스를 손쉽게 구축하고 관리할 수 있는 도구로, 소프트웨어 개발과 배포의 효율성을 크게 향상된다.
<br><br><br>

## DevSecOps에서의 Jenkins의 역할
---

Jenkins는 DevSecOps 환경에서 **자동화의 핵심 도구**로 활용된다.
- 코드 변경 시 **자동으로 빌드하고 테스트**하여 오류를 빠르게 발견할 수 있다.
- **수천 개의 플러그인을 통해 다양한 기능을 추가**하여 복잡한 요구 사항을 충족시킬 수 있다.
- **배포 파이프라인을 코드로 정의하고 관리**할 수 있어, 재사용성과 유지보수성을 극대화한다.
- **보안 검증, 취약점 스캔**과 같은 DevSecOps 요구사항도 Jenkins 파이프라인에 통합하여 자동화할 수 있습니다.

이러한 기능을 통해 Jenkins는 DevSecOps의 핵심 원칙인 **자동화, 통합, 보안**을 구현하는 데 중요한 역할을 한다.
<br><br><br>

## Jenkins worker node 생성
---

###### **1) jenkins-deployment.yaml 파일 생성**
jenkins-deployment.yaml 파일은 jenkins worke node 설정 파일이다.
k8s-yaml 폴더에 jenkins-deployment.yaml 파일 생성 후, 코드 작성
<a href="#" class="show-code" data-code-file="jenkins-deployment1">jenkins-deployment.yaml 파일</a> <br>

###### **2) jenkins-config.yaml 파일 생성**
jenkins-config.yaml 파일은 jenkins 설정 파일이다.
Jenkins 클러스터를 생성하기 위해 kind-config.yaml 파일 수정, 코드 추가
<a href="#" class="show-code" data-code-file="jenkins-config1">jenkins-config.yaml 파일</a> <br>

###### **3) jenkins-pv.yaml 파일 생성**
jenkins-pv.yaml 파일은 jenkins 데이터 저장을 위한 퍼시스턴트 볼륨 설정 파일이다.
PV(Persistent Volume)와 PVC(Claim)은 쿠버네티스에서 영구 스토리지를 관리하기 위한 핵심 리소스이다.
k8s-yaml 폴더에 jenkins-pv.yaml 파일 생성 후, 코드 작성
<a href="#" class="show-code" data-code-file="jenkins-pv">jenkins-pv.yaml 파일</a> <br>

###### **4) jenkins-service.yaml 생성**
jenkins-service.yaml 파일은 jenkins worker node의 연동을 위한 파일이다.
k8s-yaml 폴더에 jenkins-service.yaml 파일 생성 후, 코드 작성
<a href="#" class="show-code" data-code-file="jenkins-service">Jenkins-service.yaml 파일</a> <br>
<br><br><br>

## Jenkins worker node 실행
---

###### **1) kind 클러스터 재생성**
Window PowerShell 관리자 권한 실행
```md
# DevSecOps폴더로 이동
1. cd C:\Users\Administrator\Desktop\DevSecOps

# kind 클러스터 생성
2. kind create cluster --name devsecops-cluster --config k8s-yaml/kind-config.yaml

# 노드 상태 확인
3. kubectl get nodes --show-labels
```

디플로이먼트와 서비스 배포
```md
# deployment, service yaml 파일 배포
1. kubectl apply -f k8s-yaml/jenkins-deployment.yaml
2. kubectl apply -f k8s-yaml/jenkins-services.yaml

# 배포 상태 확인
3. kubectl get pods -o wide
4. kubectl get services
```

###### **2) Jenkins 관리자 암호**
Jenkins worker node로부터 초기 관리자 암호 추출
```md
# Jenkins Administrator Password에 필요한 패스워드값 출력 
1. kubectl exec -it $(kubectl get pods -l app=jenkins -o jsonpath='{.items[0].metadata.name}') -- cat /var/jenkins_home/secrets/initialAdminPassword
```

###### **3) 웹 페이지 접속**
```md
browser 주소창: localhost:8080 or http://Windows Host IP:8080
```