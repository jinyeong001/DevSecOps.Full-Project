# kind
---

**1) kind 설치 및 환경 설정**
Window PowerShell 관리자 권한 실행
```md
# KIND 다운로드
1. Invoke-WebRequest -Uri "https://kind.sigs.k8s.io/dl/v0.20.0/kind-windows-amd64" -OutFile "$env:USERPROFILE\kind.exe" 

# bin 디렉토리 생성 및 이동
2. New-Item -Path "$env:USERPROFILE\bin" -ItemType Directory -Force
3. Move-Item -Path "$env:USERPROFILE\kind.exe" -Destination "$env:USERPROFILE\bin"

# 환경변수 설정
4. $env:Path += ";$env:USERPROFILE\bin"
5. [Environment]::SetEnvironmentVariable('Path', $env:Path, 'User')

# 설치 확인
6. kind –-version
```

**2) kind-config.yaml 파일 생성**
kind-config.yaml 파일은 쿠버네티스에서 어떠한 클러스터를 생성할지 설정하는 파일이다.
DevSecOps폴더에 k8s폴더 생성 및 kind-config.yaml 파일 생성 후, 아래 코드 작성
```yaml
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
# 컨트롤 플레인
- role: control-plane
    extraPortMappings:
    - containerPort: 30080 #DevSecOps Web
        hostPort: 30080
        listenAddress: "0.0.0.0"
        protocol: TCP
# 워커 노드 1: 테스트 웹서버
- role: worker
  labels:
    node-type: webserver
    purpose: apache-php
```

**3) 클러스터 생성 및 확인**
Window PowerShell 관리자 권한 실행
*※ Docker Desktop 실행 필요*
```md
# DevSecOps\k8s폴더로 이동 (컴퓨터 설정에 따라 Users폴더 안 사용자 폴더이름 변경 필요)
1. cd C:\Users\Administrator\Desktop\DevSecOps\k8s\

# kind 명령어로 새 클러스터 생성
2. kind create cluster --config kind-config.yaml --name devsecops-cluster

# 클러스터 생성 확인
3. Kind get clusters
```

